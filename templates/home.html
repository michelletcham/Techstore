<!-- home.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Accueil - Techstore By Michelle</title>
    <link rel="stylesheet" href="/static/bootstrap_custom.css">
    <link rel="stylesheet" href="/static/modern.css">
</head>
<body>
    <nav style="margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <a href="/">Accueil</a> |
            <a href="/products">Produits</a>
            {% if user %}
                
                {% if user.is_admin %}| <a href="/admin">Admin</a>{% endif %}
            {% else %}
                | <a href="/login">Connexion</a>
                | <a href="/signup">Inscription</a>
            {% endif %}
        </div>
        {% if user %}
        <div>
            <a href="/profile" style="font-weight:bold; background:#eee; padding:6px 18px; border-radius:20px; margin-right:10px;">Profil</a>
            <a href="/logout" style="font-weight:bold; background:#eee; padding:6px 18px; border-radius:20px;">D√©connexion</a>
        </div>
        {% endif %}
    </nav>
    <h1>Bienvenue sur Techstore By Michelle</h1>
    {% block content %}
    <div class="product-list">
        {% for product in products %}
        <a href="/product/{{ product.id }}" style="text-decoration:none;color:inherit;">
        <div class="card product-item">
            {% if product.image_url %}
                <img src="{{ product.image_url }}" alt="{{ product.name }}">
            {% endif %}
                <h2><span class="product-name">{{ product.name }}</span></h2>
            <p>{{ product.description }}</p>
            <p><strong>{{ product.price }} ‚Ç¨</strong></p>
            <form method="post" action="/cart/add" onClick="event.stopPropagation();">
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <input type="number" name="quantity" value="1" min="1" max="{{ product.stock }}">
                <button type="submit">Ajouter au panier</button>
            </form>
        </div>
        </a>
        {% endfor %}
    </div>
    {% if user %}
    <a href="/cart" style="position:fixed;bottom:32px;right:32px;z-index:1000;box-shadow:0 2px 8px #bbb;font-weight:bold;background:#1e90ff;color:#fff;padding:16px 32px;border-radius:32px;text-decoration:none;">üõí Panier</a>
    {% endif %}
    {% endblock %}

    <!-- Chat widget -->
    <div id="chat-bubble" onclick="toggleChat()" style="position:fixed;bottom:32px;right:32px;z-index:2000;width:64px;height:64px;background:#4a4e69;border-radius:50%;box-shadow:0 2px 8px #bbb;display:flex;align-items:center;justify-content:center;cursor:pointer;">
        <span style="font-size:2.2em;color:#fff;">üí¨</span>
    </div>
    <div id="chat-box" style="display:none;position:fixed;bottom:32px;right:32px;z-index:2001;width:320px;max-width:90vw;background:#fff;border-radius:18px;box-shadow:0 4px 24px #0003;overflow:hidden;">
        <div style="background:#4a4e69;color:#fff;padding:12px 18px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;">
            <span>Service client</span>
            <span style="cursor:pointer;font-size:1.2em;" onclick="toggleChat()">‚úñ</span>
        </div>
        <div id="chat-body" style="height:180px;overflow-y:auto;padding:12px 12px 0 12px;background:#f7f8fa;"></div>
        <div style="display:flex;align-items:center;padding:8px 12px 12px 12px;background:#f7f8fa;">
            <input id="chat-input" type="text" placeholder="Votre message..." style="flex:1;padding:8px 12px;border-radius:8px;border:1px solid #c9ada7;margin-right:8px;">
            <button onclick="sendMessage()" style="background:#4a4e69;color:#fff;border:none;border-radius:8px;padding:8px 16px;">Envoyer</button>
        </div>
    </div>
    <script src="/static/chat.js"></script>
    <style>
    .chat-message.user { background:#e0e0ff; color:#222; margin:6px 0; padding:7px 12px; border-radius:12px 12px 2px 12px; text-align:right; }
    .chat-message.support { background:#f2e9e4; color:#4a4e69; margin:6px 0; padding:7px 12px; border-radius:12px 12px 12px 2px; text-align:left; }
    #chat-body { font-size:1em; }
    </style>

    <footer style="margin-top:40px; background:#f8f8f8; padding:32px 0 0 0; border-top:1px solid #ddd;">
        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:48px;max-width:900px;margin:auto;">
            <section style="flex:1 1 400px;min-width:220px;background:#fff;border-radius:18px;padding:24px 32px;margin-bottom:24px;box-shadow:0 2px 12px #c9ada733;">
                <h3 style="color:#4a4e69;">Contactez-nous</h3>
                <p>Email : <a href="mailto:michelletchamba56@gmail.com">michelletchamba56@gmail.com</a></p>
                <p>T√©l : <a href="tel:+33634409623">+33 6 34 40 96 23</a></p>
                <h3 style="color:#4a4e69;margin-top:32px;">Pourquoi nous choisir&nbsp;?</h3>
                <ul style="list-style:none; padding:0; margin:0;">
                    <li>üöö Livraison rapide</li>
                    <li>üîí Paiement s√©curis√©</li>
                    <li>‚≠ê Produits de bonne qualit√©</li>
                    <li>ü§ù Service client √† l'√©coute</li>
                </ul>
            </section>
        </div>
        <div style="text-align:center;color:#aaa;font-size:0.95em;padding-bottom:12px;">&copy; Techstore By Michelle {{ year }}</div>
    </footer>
</body>
</html>